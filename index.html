<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Tropico island - WebGL</title>
    <link rel="stylesheet" href="index.css" />
</head>
<body>
<!--SHADERS-->
<script id="x-shader" type="nojs">
    attribute vec4 a_position;
    uniform vec4 u_color;
    attribute vec3 a_normal;

    uniform mat4 u_matrix;
    uniform mat4 u_worldInverseTranspose;

    varying vec4 v_color;
    varying vec3 v_normal;

    uniform vec3 u_directionalLightDirection;
    uniform vec4 u_directionalLightColor;
    uniform vec3 u_pointLightPosition;
    uniform vec4 u_pointLightColor;


    vec3 ambient = vec3(0.2, 0.2, 0.2);

    varying vec3 v_LightWeighting;

    void main() {
        gl_Position =u_matrix * a_position;

        float directionalLightWeighting = max(dot(normalize(a_normal), normalize(u_directionalLightDirection)), 0.0);
        vec3 pointLightDirectionForVertex = normalize(u_pointLightPosition - a_position.xyz);
        float pointDirectionalLightWeighting = max(dot(normalize(a_normal), pointLightDirectionForVertex), 0.0);

        v_LightWeighting = ambient + vec3(u_directionalLightColor) * directionalLightWeighting + vec3(u_pointLightColor) * pointDirectionalLightWeighting;


        // Pass the color to the fragment shader.
        v_color = u_color;
    }
</script>

<script id="x-fragment-shader" type="nojs">
    precision mediump float;

    // Passed in from the vertex shader.
    varying vec4 v_color;
    varying vec3 v_LightWeighting;

    void main() {
        gl_FragColor = vec4(vec3(v_color) * v_LightWeighting, 1.0);

    }
</script>

<!--MAIN CANVAS-->
<div class="debug-info" style="display: block;">
    <span>FPS:</span> <span id="frames"></span> <br>
    <span>Camera info: </span>
    <span id="camera-info"></span>
    <br>
    <span>Sphere info</span>
    <span id="sphere-info"></span>
</div>
<canvas id="main-canvas"></canvas>

<!-- LIBRARIES -->
<script src="lib/gl-matrix.js"></script>
<script src="lib/webgl-obj-loader.js"></script>

<!-- SOURCES -->
<script src="src/camera.js"></script>
<script src="src/lighting/directionalLight.js"></script>
<script src="src/lighting/pointLight.js"></script>
<script src="src/generics/sphere.js"></script>
<script src="src/generics/plain.js"></script>
<script src="src/utils-webgl.js"></script>
<script src="src/drawing-utils.js"></script>
<script src="index.js"></script>
</body>
</html>